<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>@ViewBag.Title  | Summit Communications Ltd</title>
    <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <link type="text/css" href="/Content/adminlte/plugins/fontawesome-free/css/all.min.css" rel="stylesheet" />
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link type="text/css" href="/Content/AdminLTE/adminlte.css" rel="stylesheet" />

    @*@Styles.Render("~/bundles/adminltecss");*@
    @*<link href="@Url.Content("~/Content/AdminLTE/adminlte.min.css")" rel="stylesheet" />*@
    @*<link href="@Url.Content("~/Plugins/fontawesome-free/css/all.min.css")" rel="stylesheet" />*@

    @Scripts.Render("~/bundles/modernizr")
    @*@Scripts.Render("~/bundles/jquery")*@
    @Scripts.Render("~/bundles/common")
    <style>
        .navbar-light .navbar-nav .nav-link {
            color: rgba(0, 0, 0, 1);
        }
    </style>
</head>
@*sidebar-mini*@
@*text-sm*@
<body class="hold-transition layout-navbar-fixed sidebar-collapse">
    <div class="wrapper">
        @Html.Partial("_NavBar")
        @*@Html.Partial("_SideBar")*@
        <div class="content-wrapper px-2">
            <section class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="heading-title"></h1>
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item controller-name"><a href="#"></a></li>
                                <li class="breadcrumb-item active controller-action"></li>
                            </ol>
                        </div>
                    </div>
                </div>
            </section>
            @RenderBody()
        </div>
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Control sidebar content goes here -->
            <div class="p-3">
                <h5>Title</h5>
                <p>Sidebar content</p>
            </div>
        </aside>
        <!-- /.control-sidebar -->
        <!-- Main Footer -->
        <footer class="main-footer text-sm">
            <!-- To the right -->
            <div class="float-right center-block">
                <strong>Copyright &copy; 2022 <a href="https://www.summitcommunications.net/">Summit Communications Ltd</a>.</strong> All rights reserved.

            </div>
            <!-- Default to the left -->
            <div class="center-block"> Design and Developed By SComm IT </div> <br />

        </footer>
    </div>

    @if (Request.IsAuthenticated)
    {
        using (Html.BeginForm("LogOff", "Account", new { area = "" }, FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
        {
            @Html.AntiForgeryToken()
        }
    }

    <div id="" class="deviceType"> </div>

    <script type="text/javascript" src="@Url.Content("~/Plugins/bootstrap/js/bootstrap.bundle.min.js")"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/AdminLTE/adminlte.min.js")"></script>

    @*<script src="~/Scripts/jquery.blockUI.js"></script>*@
    @*<script src="~/Scripts/cookies.js"></script>*@
    @*<script src="~/Scripts/mobileversion/mobileV2inputfieldvalidation.js"></script>*@

<script type="text/javascript">
        window.currentCulture = '@CultureHelper.GetCurrentCulture()';

    @* @Scripts.Render("~/bundles/common_locale_" + CultureHelper.GetCurrentCulture())*@

    @*<script type="text/javascript">
            Globalize.culture(window.currentCulture);

            //Fix to decimal separator validation
            var _number = $.validator.methods.number;
            $.validator.methods.number = function (value, element) {
                return _number.call(this, Globalize.parseFloat(value), element);
            };
            var _range = $.validator.methods.range;
            $.validator.methods.range = function (value, element, param) {
                return _range.call(this, Globalize.parseFloat(value), element, param);
            };
        </script>*@

        @*<script type="text/javascript">
            $(document).ready(function () {
                $('[data-toggle="tooltip"]').tooltip();
            });

        </script>*@

        $(document).ready(function () {

            $(document).on("input propertychange", ".numbersOnly", function (event) {
                var valStr = $(this).val();
                var id = $(this).attr("id");
                var val = parseInt(valStr);
                //            showErrorMessageBelowCtrl(id, "", false);
                if (isNaN(val)) {
                    $(this).val("");
                }
                else if (val < 0) {
                    $(this).val("");
                    //              showErrorMessageBelowCtrl(id, "Please enter valid amount", true);
                } else {
                    $(this).val(val);
                }
            });

            $("#searchItem").prepend(`<level class="dropdown-item" >Sorry! no item found</level>`);

            $('#searchBox').on('input', debounce(function (e) {
                $.get('@Url.Action("SearchQuery", "Home")?search=' + $(this).val() + "&page=0limit=10").then(oo => {
                    console.log(oo)
                    var memu = $("#searchItem")
                    $("#searchItem").html('');
                    if (oo.length > 0) {
                        oo.forEach(p => {
                            memu.prepend(`<a class="dropdown-item" href="@Url.Action("Index", "Ticket")/${p.id}?viewOnly=${true}">${p.title}</a>`);
                        })
                    } else {
                        $("#searchItem").prepend(`<level class="dropdown-item" >Sorry! no item found</level>`);
                    }
                })
            }, 800));

        });

        function debounce(func, wait, immediate) {
            var timeout;
            return function () {
                var context = this, args = arguments;
                var later = function () {
                    timeout = null;
                    if (!immediate) func.apply(context, args);
                };
                var callNow = immediate && !timeout;
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
                if (callNow) func.apply(context, args);
            };
        };


        const deviceType = () => {
            const ua = navigator.userAgent;
            if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {
                return "tablet";
            }
            else if (/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {
                return "mobile";
            }
            return "desktop";
        };

        //$('.deviceType').attr('id').val(deviceType());
        console.log(deviceType());
        console.log($('.deviceType').val());

</script>
@RenderSection("scripts", required: false)
</body>
</html>


